# 1. Directory Layer (Feature-Sliced Design)

이 문서는 프로젝트의 디렉토리 구조와 각 레이어의 역할, 그리고 종속성 규칙에 대해 설명합니다. 본 아키텍처는 [Feature-Sliced Design](https://feature-sliced.design/)에서 영감을 받아 구성되었습니다.

## 핵심 규칙: 단방향 참조
- `src/` 디렉토리는 7개의 하위 디렉토리(레이어)로 구성되어 있습니다.
- 하나의 레이어 안에 있는 기능들은 **본인과 동일한 위계, 혹은 하위 레이어의 기능만 참조할 수 있으며 상위 레이어의 기능을 참조할 수 없습니다.**

## 7계층 레이어 설명

1. **`/app` (최상위 계층)**
   - 모든 하위 레이어를 참조할 수 있습니다.
   - Next.js의 App Router 기능을 담당하며, 페이지들의 라우팅 요소가 이곳에 정의됩니다.
   - 페이지에서 사용하는 지역 상태를 제공하기 위한 `.provider.jsx` 파일을 가질 수 있으며, 이 역시 하위 계층을 모두 참조 가능합니다.

2. **`/app-configs`**
   - 서비스를 구성하기 위해 필요한 전역 설정이나 함수들을 보관합니다. (예: Next.js 미들웨어, 전역 테마, 라우팅 규칙 설정 등)

3. **`/widgets`**
   - 하나의 기능을 온전히 보여주는 완성된 UI 컴포넌트입니다.
   - 피쳐(`features`), 도메인(`domains`), 공유 요소(`shared`) 등을 조합하여 독립적이고 재사용 가능한 컴포넌트를 구성합니다.

4. **`/features`**
   - 하나의 완성된 비즈니스 로직 단위입니다.
   - 하나의 파일이 하나의 로직을 담도록 구성하며, 필요한 경우 로딩(loading)이나 에러(error) 상태를 관리하는 커스텀 훅 형태로 작성합니다.

5. **`/domains`**
   - 서비스 내 특정 엔티티(예: User, Product, Post 등)에 관련된 비즈니스의 상태나 핵심 데이터 스키마를 정의합니다.
   - 엔티티 디렉토리 내부에는 다음과 같은 구조를 권장합니다.
     - `/api`
     - `/schema`
     - `/store`: 전역 상태 (예: zustand를 이용한 `.repository.js` 및 `.store.js`)
     - `/util`

6. **`/libs`**
   - 외부 라이브러리(axios, dayjs 등)를 사용할 때 작성되는 헬퍼 함수들입니다.
   - **라이브러리 문법이 다른 레이어에 직접적으로 노출되지 않도록 Wrapper 를 제공하는 것이 핵심 책임**입니다. (단, axios, zustand 등은 예외로 취급할 수 있습니다.)
   - 의존성이 2개 이상 결합된 항목들은 `/combined` 디렉토리 하위에 보관합니다.

7. **`/shared` (최하위 계층)**
   - 라이브러리에 종속되지 않는 독립적인 공통 기능 모음입니다.
   - 공통 UI 컴포넌트, 유틸리티 함수, 전역 상수 등을 포함합니다.

## 구조 예시
```bash
src
├── app // #1 레이어
│   ├── [route-name]
│   │   ├── _assets
│   │   ├── _modals
│   │   ├── _sections
│   │   ├── ~.provider.jsx
│   │   └── page.jsx
├── app-configs // #2 레이어
├── widgets // #3 레이어
├── features // #4 레이어
├── domains // #5 레이어 (엔티티 중심)
├── libs // #6 레이어 (라이브러리 Wrapper)
└── shared // #7 레이어 (공통 기능의 모음)
```
